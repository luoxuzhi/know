(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{521:function(t,a,s){"use strict";s.r(a);var e=s(53),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_8-h5-和小程序直播开发-零距离快速入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-h5-和小程序直播开发-零距离快速入门"}},[t._v("#")]),t._v(" 8. h5 和小程序直播开发 零距离快速入门")]),t._v(" "),s("p",[t._v("1.直播协议：\nHLS 协议、RTMP 协议、HTTP-FLV 协议")]),t._v(" "),s("p",[t._v("2.hls 好用但有延时，对延时要求不高可使用\n"),s("img",{attrs:{src:t.$withBase("/assets/hls.png")}})]),t._v(" "),s("p",[t._v("动态列表直播（live playlist）、全量列表点播（vod playlist）")]),t._v(" "),s("p",[t._v("hls 解析过程")]),t._v(" "),s("p",[t._v("第一个 ts 文件会查找 PAT 文件，PAT 文件会查找 PMT 文件，PAT、PMT（音频视频帧）和 ts 组合成 PES 文件")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/assets/hls-1.png")}}),t._v(" "),s("p",[t._v("3.rtmp 用于传统的视频，使用客户端采集源收集到服务器可以使用 tcp 协议传输，如果用 web 进行源采集则是基于 webRtc\n，使用相对复杂，实时性好，减少延时可使用该方式，格式是 flv")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/assets/rtmp.png")}}),t._v(" "),s("p",[t._v("4.http-flv 是 rtmp 的升级版，它兼具 hls 和 rtmp 的优点， 可减少延时，视频格式是 flv，是 flv 长连接，不利于并发。\n与 rtmp 的区别是 rtmp 和用户之间是用 tcp 通信，而 http-flv 和播放客户端是基于 http 协议的，但是它们的格式都是 flv。")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/assets/http-flv.png")}}),t._v(" "),s("p",[t._v("5.video 属性\n"),s("img",{attrs:{src:t.$withBase("/assets/video-prop.png")}})]),t._v(" "),s("p",[t._v("6.video 事件")]),t._v(" "),s("p",[t._v("可流畅播放的事件：canplaythrough\n自定义进度条用 timeupdate 事件")]),t._v(" "),s("h4",{attrs:{id:"loadstart-durationchange-loadedmetadata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loadstart-durationchange-loadedmetadata"}},[t._v("#")]),t._v(" loadstart durationchange loadedmetadata")]),t._v(" "),s("h4",{attrs:{id:"progress-canplay-play-pause"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#progress-canplay-play-pause"}},[t._v("#")]),t._v(" progress canplay play pause")]),t._v(" "),s("h4",{attrs:{id:"seeking-seeked-waiting-ended"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#seeking-seeked-waiting-ended"}},[t._v("#")]),t._v(" seeking seeked waiting ended")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/assets/video-event.png")}}),t._v(" "),s("p",[t._v("7.制作流")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/xbfengyu/article/details/100094747",target:"_blank",rel:"noopener noreferrer"}},[t._v("可以用在线流"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);